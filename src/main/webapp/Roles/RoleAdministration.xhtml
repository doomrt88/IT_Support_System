<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui">
                

    
    <div class="container">
        <h2>Role Management</h2>
		<button type="button" class="btn btn-outline-primary btn-sm mb-3"  onclick="loadRoleForm(false, 0);"><i class="fas fa-plus"></i> Create</button>
        <div id="roleListForm">
            <ui:include src="/Roles/RoleList.xhtml" />
        </div>
        
        
        <div class="modal fade" id="createRoleModal" tabindex="-1" role="dialog" aria-labelledby="modalTitle" aria-hidden="true">
	        <div class="modal-dialog" role="document">
	            <div class="modal-content">
	                <div class="modal-header">
	                    <h5 class="modal-title" id="createRoleModalTitle">Create Role</h5>
	                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
	                        <span aria-hidden="true">x</span>
	                    </button>
	                </div>
	                <div class="modal-body">
	                    <ui:include src="/Roles/RoleForm.xhtml" />
	                </div>
						                
	            </div>
	        </div>
	    </div>
    </div>
	<script>

	function loadRoleForm(isEdit, role) {
		console.log(role);
	    console.log("I'm clicked");
	    if (isEdit) {
	        $('#createRoleModalTitle').text('Edit Role');
	    } else {
	        $('#createRoleModalTitle').text('Create Role');
	    }
	    
	    $.ajax({
	        url: "/Roles/RoleForm.xhtml",
	        method: "GET",
	        success: function(data) {
	            // Load the response data into the modal body
	            $("#createRoleModal .modal-body").html(data);
	            
	            // If it's an edit operation, load the role details
	            if (isEdit) {
	                loadRoleData(role);
	            }
	            
	            // Show the modal
	            $('#createRoleModal').modal('show');
	        },
	        error: function(xhr, status, error) {
	            console.error("Error loading RoleForm:", error);
	        }
	    });
	}

	function loadRoleData(roleJson) {
		var role = JSON.parse(roleJson);
	    
	    // Populate the form fields with the role data
	    $('#roleForm\\:id').val(role.id);
	    $('#roleForm\\:name').val(role.name);
	    $('#roleForm\\:description').val(role.description);
	}
    </script>
    
   </ui:composition>